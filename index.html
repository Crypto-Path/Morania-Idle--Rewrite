<!DOCTYPE html>
<html>
    <head>
        <title>
            Morania Idle v1.0.4b
        </title>
        <meta http-equiv='cache-control' content='no-cache'> 
        <meta http-equiv='expires' content='0'> 
        <meta http-equiv='pragma' content='no-cache'>

        <link rel="stylesheet" type="text/css" href="styles.css">
        <link rel="stylesheet" type="text/css" href="styles/save.css">
        <link rel="stylesheet" type="text/css" href="styles/hitbox.css">
        <link rel="stylesheet" type="text/css" href="styles/inventory.css">
        <link rel="stylesheet" type="text/css" href="styles/craft.css">
        <link rel="stylesheet" type="text/css" href="styles/quests.css">
        <link rel="stylesheet" type="text/css" href="styles/bars.css">
        <link rel="stylesheet" type="text/css" href="styles/toolTip.css">
        <link rel="stylesheet" type="text/css" href="styles/bestiary.css">
        <link rel="stylesheet" type="text/css" href="styles/notification.css">
        <link rel="stylesheet" type="text/css" href="styles/changelog.css">
        <link rel="stylesheet" type="text/css" href="styles/lines.css">
        <link rel="stylesheet" type="text/css" href="styles/scrollBar.css">
        <link rel="stylesheet" type="text/css" href="styles/popup.css">
    </head>
    <body>
        <script src="modules/functions.js"></script>
        <script src="modules/Item.js"></script>
        <script src="modules/DropChance.js"></script>
        <script src="modules/Monster.js"></script>
        <script src="modules/Area.js"></script>
        <script src="modules/Region.js"></script>
        <script src="modules/Quest.js"></script>
        <script src="modules/QuestLine.js"></script>
        <script src="modules/SaveAndLoad.js"></script>
        <script>
            const backgroundMusic = new Audio("Audio/Background.mp3");
            const attackAudio = new Audio("Audio/Attack.mp3");
            const deleteAudio = new Audio("Audio/Delete.wav");
            const dragAudio = new Audio("Audio/Drag.wav");
            const hoverAudio = new Audio("Audio/Hover.mp3");
            const releaseAudio = new Audio("Audio/Release.wav");
            const chinkAudio = new Audio("Audio/Chink.mp3");
            const equipAudio = new Audio("Audio/Equip.mp3");
            const tabAudio = new Audio("Audio/Tab.mp3");
            const packAudio = new Audio("Audio/Pack.mp3");

            function MasterVolume(vol) {
                backgroundMusic.volume = vol;
                attackAudio.volume = vol;
                deleteAudio.volume = vol;
                dragAudio.volume = vol;
                hoverAudio.volume = vol;
                releaseAudio.volume = vol;
                chinkAudio.volume = vol;
                equipAudio.volume = vol;
                tabAudio.volume = vol / 4;
            }

            MasterVolume(1)
        </script>
                    
        <div id="tooltip">
            <div class="diagonal-lines"></div>
            <p id="tooltipTitle">
            </p>
            <br>
            <br>
            <hr>
            <p id="tooltipDescription">
            </p>
        </div>
        <div class="overlay" id="overlay"></div>
        <div class="notification-container"></div>
        <script src="modules/Notification.js"></script>
        <div id="Bestiary" class="Locked">
            <div id="BeastInfoPanel">
                <div>
                    <button id="bestiaryClose" class="close-btn" style="position: absolute;" onclick="{game.toggleBestiary();}">
                        X
                    </button>
                    <h1 id="BestiaryName">
                        Bestiary
                    </h1>
                    <hr>
                    <p id="BestiaryDescription">
                        Description
                    </p>
                </div>
                <div id="MonsterStats" class="container">
                    <h3>
                        Stats and Drops
                    </h3>
                    <hr>
                    <p>
                        HP: <a id="BestiaryHP">X</a>
                        <br>
                        DEF: <a id="BestiaryDef">X</a>
                        <br>
                        <br>
                        Deaths: <a id="BestiaryDeaths">X</a>
                        <br>
                        <br>
                        <div id="BestiaryDrops" class="container">
                        </div>
                    </p>
                </div>
            </div>
            <div id="BestiaryContainer">
                <div id="BeastList">
                </div>
            </div>
        </div>
        <div id="mainMenu">
            <div id="changeLog" class="container">
                <a style="font-size: 30px; text-align: center; width: 100%">
                    Change Log
                </a>
                <div id="changeLogList" class = "container">
                    <div  class = "container changeLogItem">
                        <a style="font-size: 20px;">
                            v1.0.4
                        </a>
                        <p class="changelogDesc">
                        What's new?
                        - Fixed monster false rendering after second to last hit.
                        - Added bestiary
                        - Loot Popups
                        - Fixed audio bug from attacking the monster too fast
                        - Improved category switcher
                        </p>
                    </div>
                    <div  class = "container changeLogItem">
                        <a style="font-size: 20px;">
                            v1.0.3
                        </a>
                        <p class="changelogDesc">
                        What's new?
                        - Added Discord link (bottom right) (please join)
                        - Link to my about me website (bottom right)
                        - Fixed Questing
                        &#160&#160&#160- Quests no longer duplicate
                        &#160&#160&#160- Item rewards are now given
                        &#160&#160&#160- Inventory now updates after completion
                        &#160&#160&#160- Each quest now accepts it's correct requirement
                        &#160&#160&#160- Quests completed, save now
                        - Item quantities go away when there is no item
                        - Removed user quantity from crafting tooltip
                        - Fixed Drop Multiplier being +100% on weapons that didn't have that data
                        - Added Smelter
                        - Added production tabs
                        - Improved item descriptions
                        - Added refined/unrefined variants to metallic materials
                        - Improved and Optimized tooltips
                        - Gold and Jade weapons
                        - Better descriptions for every item
                        - Rebalanced Slime Weapons
                        </p>
                    </div>
                    <div  class = "container changeLogItem">
                        <a style="font-size: 20px;">
                            v1.0.2
                        </a>
                        <p class="changelogDesc">
                        What's new?
                        - This Changelog
                        - Idle mode feedback
                        - New calculation for damage
                        &#160&#160&#160- Roughly √(str² + (1 + wpn-dmg)²)
                        - Slight weapon re-balance
                        &#160&#160&#160- Copper Sword 96 -> 100
                        - Screen transition (menu -> game)
                        - Notification system
                        - Fixed health bar extending too far - auto clicker problem >:(
                        - Item count
                        - Simple guide/tutorial when starting a new save
                        </p>
                    </div>
                </div>
            </div>
            <div id="save" class="container">
                <a>
                    Load Save
                </a>
                <hr>
                <div class="hoverOutline card" onclick="{
                    fadeScreen();
                    
                    file.load();

                    setTimeout(() => {
                        document.getElementById('body').style.display = 'flex';
                        document.getElementById('mainMenu').style.display='none';
                        unfadeScreen();
                    }, 1000 + 200);
                }">
                    <p id="saveDate"></p>
                    <script>
                        const StartDate = new Date()
                        document.getElementById("saveDate").innerText = StartDate.toLocaleString();
                    </script>
                    <img id="saveCoverImage" src="Images/Monster_Slime_Small_Green.png" style="width: 100%;"/>
                    <p id="saveStats">
                        Level: [1] 0/10 (0%) 
                    </p>
                </div>
                <hr>
            </div>
        </div>
        <div id="body" style="display: none;">
            <div>
                <div class="container">
                    <button class="close-btn" style="position: absolute;" onclick="{game.toggleBestiary();}">
                        Bestiary
                    </button>
                    <p>
                        Guild
                    </p>
                    <div id="QuestMenu">
                        <div class="itemsContainer">
                            <div id="questList" class="itemsList">
                                
                            </div>
                        </div>
                    </div>
                </div>
                <div class="container Locked">
                    <p>
                        Shop
                    </p>
                    <div class="itemsContainer" style="background-color: rgb(150, 150, 150);">
                        <div class="itemsList">
                            <p>
                                Coming Soon
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <div class="container">
                    <p>
                        Inventory
                    </p>
                    <div id="Inventory" ondrop="drop(event)" ondragover="allowDrop(event)">
                        <div class="item" draggable="true" ondragstart="drag(event)"><div><img id="0" draggable="false" class="slotIMG" src="" /></div><a class="itemCount"></a></div>
                        <div class="item" draggable="true" ondragstart="drag(event)"><div><img id="1" draggable="false" class="slotIMG" src="" /></div><a class="itemCount"></a></div>
                        <div class="item" draggable="true" ondragstart="drag(event)"><div><img id="2" draggable="false" class="slotIMG" src="" /></div><a class="itemCount"></a></div>
                        <div class="item" draggable="true" ondragstart="drag(event)"><div><img id="3" draggable="false" class="slotIMG" src="" /></div><a class="itemCount"></a></div>
                        <div class="item" draggable="true" ondragstart="drag(event)"><div><img id="4" draggable="false" class="slotIMG" src="" /></div><a class="itemCount"></a></div>
                        <div class="item" draggable="true" ondragstart="drag(event)"><div><img id="5" draggable="false" class="slotIMG" src="" /></div><a class="itemCount"></a></div>
                        <div class="item" draggable="true" ondragstart="drag(event)"><div><img id="6" draggable="false" class="slotIMG" src="" /></div><a class="itemCount"></a></div>
                        <div class="item" draggable="true" ondragstart="drag(event)"><div><img id="7" draggable="false" class="slotIMG" src="" /></div><a class="itemCount"></a></div>
                        <div class="item" draggable="true" ondragstart="drag(event)"><div><img id="8" draggable="false" class="slotIMG" src="" /></div><a class="itemCount"></a></div>
                        <div class="item" draggable="true" ondragstart="drag(event)"><div><img id="9" draggable="false" class="slotIMG" src="" /></div><a class="itemCount"></a></div>
                        <div class="item" draggable="true" ondragstart="drag(event)"><div><img id="10" draggable="false" class="slotIMG" src="" /></div><a class="itemCount"></a></div>
                        <div class="item" draggable="true" ondragstart="drag(event)"><div><img id="11" draggable="false" class="slotIMG" src="" /></div><a class="itemCount"></a></div>
                        <div class="item" draggable="true" ondragstart="drag(event)"><div><img id="12" draggable="false" class="slotIMG" src="" /></div><a class="itemCount"></a></div>
                        <div class="item" draggable="true" ondragstart="drag(event)"><div><img id="13" draggable="false" class="slotIMG" src="" /></div><a class="itemCount"></a></div>
                        <div class="item" draggable="true" ondragstart="drag(event)"><div><img id="14" draggable="false" class="slotIMG" src="" /></div><a class="itemCount"></a></div>
                        <div class="item" draggable="true" ondragstart="drag(event)"><div><img id="15" draggable="false" class="slotIMG" src="" /></div><a class="itemCount"></a></div>
                        <div class="item" draggable="true" ondragstart="drag(event)"><div><img id="16" draggable="false" class="slotIMG" src="" /></div><a class="itemCount"></a></div>
                        <div class="item" draggable="true" ondragstart="drag(event)"><div><img id="17" draggable="false" class="slotIMG" src="" /></div><a class="itemCount"></a></div>
                        <div class="item" draggable="true" ondragstart="drag(event)"><div><img id="18" draggable="false" class="slotIMG" src="" /></div><a class="itemCount"></a></div>
                        <div class="item" draggable="true" ondragstart="drag(event)"><div><img id="19" draggable="false" class="slotIMG" src="" /></div><a class="itemCount"></a></div>
                        <div class="item" draggable="true" ondragstart="drag(event)"><div><img id="20" draggable="false" class="slotIMG" src="" /></div><a class="itemCount"></a></div>
                        <div class="item" draggable="true" ondragstart="drag(event)"><div><img id="21" draggable="false" class="slotIMG" src="" /></div><a class="itemCount"></a></div>
                        <div class="item" draggable="true" ondragstart="drag(event)"><div><img id="22" draggable="false" class="slotIMG" src="" /></div><a class="itemCount"></a></div>
                        <div class="item" draggable="true" ondragstart="drag(event)"><div><img id="23" draggable="false" class="slotIMG" src="" /></div><a class="itemCount"></a></div>
                    </div>
                </div>
                <div class="container">
                    <p>
                        Production
                    </p>
                    <div class="flexGroup">
                        <button class="tab-left" onclick="openTab('CraftingMenu','SmeltingMenu')">Crafting</button>
                        <button class="tab-right" onclick="openTab('SmeltingMenu','CraftingMenu')">Smelting</button>
                    </div>
                    <div id="CraftingMenu">
                        <p id="Catagory">
                            <button onclick="{game.previousCategory(); PlayAudio(tabAudio)}"><</button>
                            <a id="CategoryText">
                                All
                            </a>   
                            <button onclick="{game.nextCategory(); PlayAudio(tabAudio)}">></button>
                        </p>
                        <div id="CraftingMenuItemsContainer">
                            
                            <div class="CraftingList">
                            </div>
                        </div>
                    </div>
                    <div id="SmeltingMenu" class="container flexGroup Locked">
                        <div>
                            <p style="text-align: right; padding: 16px">
                                Smeltable Item ->
                                <br>
                                <br>
                                Fuel Item ->
                            </p>
                        </div>
                        <div>
                            <span>
                                <div id="smelterOreSlot" class="item"><div><img id="SmelterOreSlotImage" draggable="false" src="" /></div><a class="itemCount"></a></div>
                            </span>
                            <span>
                                <div id="smelterFuelSlot" class="item"><div><img id="SmelterFuelSlotImage" draggable="false" src="" /></div><a class="itemCount"></a></div>
                            </span>
                        </div>
                        <div class="bar-small-up">
                            <div id="SmeltingBar" class="bar-small-up orange">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <script>
            </script>

            <script>
        
                // Get all elements with the class "item"
                const slots = document.getElementsByClassName('item');
                let deslot = null;
        
                // Attach the event listener to each element
                for (let i = 0; i < slots.length; i++) {
                    slots[i].addEventListener('mousedown', () => {
                        tooltip.style.display = 'none';
                        deslot = slots[i].children[0].children[0].id;
                        if (event.button === 0) {
                            PlayAudio(hoverAudio)
                        }
                        if (event.button === 2) {
                            event.preventDefault();
                            PlayAudio(deleteAudio)
                            game.inventory.removeItem(game.inventory.inventory[deslot][0].name);
                            //setToolTipText()
                        }
                    });
                }

                document.addEventListener("DOMContentLoaded", function() {
                    addDropAction(document.getElementById("dropzone") , () => {
                        game.setSlot(game.inventory.inventory[deslot][0], document.getElementById("EquippedSlot"), "Equipable", equipAudio, null, (_item) => {
                            const item = _item;
                            console.log(item)
                            game.unequipItem();
    
                            game.inventory.equipped = item;
                            game.updateStats();
                        })
                    });
                    
                    addDropAction(document.getElementById("smelterFuelSlot") , () => {
                        //game.smelterFuel(game.inventory.inventory[deslot][0])
                        game.setSlot(game.inventory.inventory[deslot][0], document.getElementById("SmelterFuelSlotImage"), "Fuel", equipAudio, null, (_item) => {
                            if (game.inventory.fuel == undefined) {
                                game.inventory.fuel = [_item, 1];
                                PlayAudio(equipAudio)
                            } else if (game.inventory.fuel[0] == _item) {
                                game.inventory.fuel[1]++;
                            }
                            
                            if (game.inventory.canSmelt)
                                game.checkSmelter();
                        })
                    });
                    
                    addDropAction(document.getElementById("smelterOreSlot") , () => {
                        //game.smelterFuel(game.inventory.inventory[deslot][0])
                        game.setSlot(game.inventory.inventory[deslot][0], document.getElementById("SmelterOreSlotImage"), "Smeltable", equipAudio, null, (_item) => {
                            if (game.inventory.smelted == undefined) {
                                game.inventory.smelted = [_item, 1];
                                PlayAudio(equipAudio)
                            } else if (game.inventory.smelted[0] == _item) {
                                game.inventory.smelted[1]++;
                            }

                            if (game.inventory.canSmelt)
                                game.checkSmelter();
                        })
                    });
                });

                function addDropAction(element, func) {
                    element.addEventListener("dragenter", function(event) {
                        event.preventDefault();
                    });
                
                    element.addEventListener("dragover", function(event) {
                        event.preventDefault();
                    });
                
                    element.addEventListener("drop", function(event) {
                        func();
                        //console.log("Smelter Fuel Added: " + game.inventory.inventory[deslot][0].name)
                        
                        event.preventDefault();
                    });
                }
            </script>
            
            <script src="modules/Inventory.js"></script>

            <div>
                <div class="container">
                    <div id="MonsterContainer">
                        <p id="MonsterName">
                            Small Green Slime
                        </p>
                        <div id="hitBox">
                            <img id="hitBoxImage">
                        </div>
                        <div id="MonsterHealthBar" class="bar background barFlex">
                            <div id="InnerHealthBarContainer" class="bar">
                                <div id="MonsterHealthBarInner" class="bar">
                                </div>
                                <div id="SecondMonsterHealthBarInner" class="bar">
                                </div>
                            </div>
                            <p id="HealthBarInnerText">
                                10 / 10
                            </p>
                        </div>
                    </div>
                </div>
                <div class="container">
                    <div class="barFlex">
                        <button onclick="{game.previousArea(); RenderHPBar(monsterNameText, healthBarInner, secondHealthBarInner, healthBarText); PlayAudio(tabAudio)}"><</button>
                        <p id="AreaName">
                            Green Plains
                        </p>
                        <button onclick="{game.nextArea(); RenderHPBar(monsterNameText, healthBarInner, secondHealthBarInner, healthBarText); PlayAudio(tabAudio)}">></button>
                    </div>
                </div>
            </div>
            


            <div>
                <div class="container">
                    <p>
                        Player Stats
                    </p>
                    <p id="PlayerStatsText" class="stats">
                    </p>
                    <span>
                        <div id="dropzone" onclick="{game.unequipItem()}" class="item"><div><img id="EquippedSlot" draggable="false" src="Images/Slot_Equipment_Sword.png" /></div></div>
                    </span>
                    <br>
                    <div id="XPBarBackground" class="bar background barFlex">
                        <div id="XPBar" class="bar">
                            <div id="XPBar" class="bar">
                                <div class="diagonal-bars"></div>
                            </div>
                        </div>
                        <p id="XPProgress">
                            [1] 0 / 10 (0%)
                        </p>
                    </div>
                    <br>
                </div>
                <div class="container">
                    <p>
                        Settings
                    </p>
                    <label for="masterVolume">Master Volume</label><br>
                    <input id="masterVolume" type="range" min="0" max="100" value="100" onchange="{document.getElementById('masterVolumePercent').innerText = this.value + '%'; MasterVolume(this.value / 100);}"><p id="masterVolumePercent">100%</p>
                    <input onchange="{autoAttack = this.checked;}" type="checkbox">
                    <a>Idle Mode</a>
                    <hr>
                    <button onclick="{file.save(); file.loaded = true}">Save</button><br>
                    <button class="redText" onclick="{localStorage['file'] = undefined; file.loaded = false; alert('(Auto save disable, save to re-enable)\n If you accidentally pressed this, don\'t worry, just save after this message and it\'ll be like nothing happened :)')}">Delete Save</button>
                </div>
            </div>
        </div>
        
        <script>
            let scale = 1;
            window.addEventListener('wheel', function(event) {
                if (isChildOfContainerElement(event.target)) {
                    return;
                }

                if (event.deltaY < 0) {
                    scale += 0.01; 
                } else if (event.deltaY > 0) {
                    scale -= 0.01;
                }
                
                if (scale > 2)
                    scale = 2;

                if (scale < 0.5)
                    scale = 0.5;

                document.getElementById('body').style.transform = `scale(${scale})`;
              });

              function isChildOfContainerElement(element) {
                if (!element) {
                    return false;
                }
            
                let parent = element;
            
                while (parent) {
                    if (parent.classList.contains('container')) {
                        return true; // Found an ancestor with overflow
                    }
                    parent = parent.parentElement;
                }
            
                return false; // No ancestor with overflow found
            }
        </script>

        <script src="Game.js"></script>
        <script>
            let game = null
            let file = null;

            let hitBox = document.getElementById("hitBox");
            let hitBoxImage = document.getElementById("hitBoxImage");
            let monsterNameText = document.getElementById("MonsterName");
            let healthBarText = document.getElementById("HealthBarInnerText");
            let healthBarInner = document.getElementById("MonsterHealthBarInner");
            let secondHealthBarInner = document.getElementById("SecondMonsterHealthBarInner");

            let areaName = document.getElementById("AreaName");

            let autoAttack = false;

            let mousePos = [0, 0];

            document.addEventListener("DOMContentLoaded", function() {
                game = new Game();
                game.inventory = new Inventory(document.querySelectorAll('.slotIMG'));
                game.updateStats();
                file = new SaveAndLoad(game, StartDate);

                hitBox.addEventListener("click", ()=> {
                    if (!autoAttack) {
                        hit(game);
                    }
                })

                document.addEventListener("mousemove", (event) => {
                    tooltip.style.top = `${event.clientY + 10}px`;
                    tooltip.style.left = `${event.clientX + 10}px`;

                    mousePos[0] = event.clientX;
                    mousePos[1] = event.clientY;
                });
            });

            const autoAttackLoop = setInterval(() => {
                if (autoAttack) {
                    hit(game, false);
                }
            }, 1000);

            function hit(game, input = true) {
                if (input) {
                    PlayAudio(attackAudio, 220);
                }
                game.attackMonster();
                hitHitBox();
                RenderHPBar(monsterNameText, healthBarInner, secondHealthBarInner, healthBarText);
            };

            function RenderHPBar (nText, hBar, hBar2, hBarText) {
                hBar.style.width = 190 * game.currentMonster.hp / game.currentMonster.maxHp + "px";
                hBar2.style.width = 190 * game.currentMonster.hp / game.currentMonster.maxHp + "px";
                hBarText.innerText = `${Math.ceil(game.currentMonster.hp)} / ${game.currentMonster.maxHp}`;
                nText.innerText = game.currentMonster.name;

                if (game.currentMonster.hp <= 0) {
                    hBar.style.width = 190 * game.currentMonster.hp / game.currentMonster.maxHp + "px";
                    hBar2.style.width = 190 * game.currentMonster.hp / game.currentMonster.maxHp + "px";
                    hBarText.innerText = `${Math.ceil(game.currentMonster.hp)} / ${game.currentMonster.maxHp}`;
                    nText.innerText = game.currentMonster.name;
                }
            }

            function hitHitBox() {
                var hitBox = document.getElementById("hitBoxImage");
                
                var randomAngle = Math.floor(Math.random() * 181) - 90;
                var randomDirection = Math.random() < 0.5 ? -1 : 1;
                hitBox.style.transform = "rotate(" + randomDirection * randomAngle + "deg)";
                
                setTimeout(() => {
                    hitBox.style.transition = "transform 1s";
                    hitBox.style.transform += "rotate(0deg)";
                }, 60)

                setTimeout(() => {
                    hitBox.style.transition = "";
                    hitBox.style.transform = "";
                }, 1200);
            }
        </script>

        <script>
            document.addEventListener("click", function() {
            
                function loopBackgroundMusic() {
                    this.currentTime = 0;
                    this.play();
                }
            
                backgroundMusic.addEventListener("ended", loopBackgroundMusic);
            
                backgroundMusic.play();
                
                // Remove the click event listener after it's been triggered once
                document.removeEventListener("click", arguments.callee);
            });
        </script>
        
        <script>
            const bodyElement = document.getElementById('body');

            let keysDown = {
                "ArrowUp" : false,
                "ArrowDown" : false,
                "ArrowLeft" : false,
                "ArrowRight" : false
            }

            let moveInterval = null;
            const body = document.getElementById("body");
            body.style.top = `0px`;
            body.style.left = `0px`;

            const moveSpeed = 5;

            setInterval(() => {
                if(keysDown["ArrowUp"])
                    body.style.top = `${parseInt(body.style.top) + moveSpeed}px`;
                if(keysDown["ArrowDown"])
                    body.style.top = `${parseInt(body.style.top) - moveSpeed}px`;
                if(keysDown["ArrowLeft"])
                    body.style.left = `${parseInt(body.style.left) + moveSpeed}px`;
                if(keysDown["ArrowRight"])
                    body.style.left = `${parseInt(body.style.left) - moveSpeed}px`;
            }, 15);

            document.addEventListener('keydown', (event) => {
                keysDown[event.key] = true;
            });

            document.addEventListener('keyup', (event) => {
                keysDown[event.key] = false;
            });
        </script>
        <div class="diagonal-lines"></div>

        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const data = file.getSaveCoverData();
                console.log(data)
                document.getElementById("saveDate").innerText = data[0].toLocaleString();
                document.getElementById("saveStats").innerText = `[${data[2]}] ${data[1]} / ${game.getXpReq(data[2])} (${Math.round(100 * data[1] / game.getXpReq(data[2]))}%)`;
                document.getElementById("saveCoverImage").src = (data[3] != undefined) ? getImageURL(data[3].sprite) : getImageURL("Monster_Slime_Small_Green");
            })

            setInterval(() => {
                if(file.loaded)
                    file.save(true, true);

                console.log("Auto Save!")
            }, 1000 * 60 * 5)

            window.addEventListener('beforeunload', function (e) {
                if(file.loaded) {
                    e.preventDefault();
                    file.save();
                }
            });
        </script>
        <div class="bottomWindowContainer">
            <img id="Emblem" title="Cyphe Mercury" onclick="{window.open('https://cyphemercury.online/', '_blank');}"  src="Images/001 - CyphesEmblem.png" width="64"/>
            <img title="Cyphe Games (Discord)" onclick="{window.open('https://discord.com/invite/nhzhtfYYbH', '_blank');}"  src="https://assets-global.website-files.com/6257adef93867e50d84d30e2/636e0a6a49cf127bf92de1e2_icon_clyde_blurple_RGB.png" width="64"/>
        </div>
        <a class="bottom-right">
            v1.0.4
        </a>
    </body>
</html>